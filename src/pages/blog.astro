---
import Layout from "../layouts/Layout.astro";
import BlogPost from "../components/BlogPost.astro";
import TagPane from "../components/TagPane.astro";

import "../styles/grid.css";

const allPosts = await Astro.glob("../pages/posts/*.md");
allPosts.sort(
  (a, b) =>
    Date.parse(b.frontmatter.pubDate) - Date.parse(a.frontmatter.pubDate)
);

const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];
---

<Layout title="TNT's Blog" description="My random posts">
  <div class="grid">
    <div id="article-list" class="col-65 left">
      {
        allPosts.map((post) => (
          <BlogPost
            url={post.url}
            description={post.frontmatter.description}
            title={post.frontmatter.title}
            date={post.frontmatter.pubDate.slice(0, 10)}
            tags={post.frontmatter.tags}
          />
        ))
      }
    </div>
    <div id="tag-pane" class="col-33 right">
      <TagPane></TagPane>
    </div> 
  </div>
</Layout>

<style>
  @media (max-width: 500px) {
    body {
      font-size: 1em;
    }
    #article-list, #tag-pane {
      padding: 0 1.5em;
    }
    #tag-pane {
      margin-top: 3rem;
    }
  }
</style>
